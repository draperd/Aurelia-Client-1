{"version":3,"sources":["app.js","environment.js","main.js","resources/index.js","components/breadcrumb.js","components/home.js","components/list.js","components/listview.js","components/login.js","components/toolbar.js"],"names":["AuthorizeStep","run","navigationInstruction","next","getAllInstructions","some","i","config","settings","roles","indexOf","isLoggedIn","localStorage","ticket","cancel","App","configureRouter","router","title","addPipelineStep","map","route","moduleId","debug","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Breadcrumb","Element","element","breadcrumbs","label","relativePath","navigate","breadcrumb","changeEvent","CustomEvent","detail","bubbles","dispatchEvent","relativePathChanged","newPath","oldPath","breadcrumbData","createBreadcrumbs","Home","List","data","skipCount","maxItems","list","entries","pagination","getData","attached","addEventListener","event","setRelativePath","pageBack","pageForward","getItems","response","hasMoreItems","item","entry","name","ListView","isFolder","Login","handleSubmit","username","value","pass","login","loggedIn","Toolbar","back","forward"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Redirect} from \"aurelia-router\";\n\nclass AuthorizeStep {\n   run(navigationInstruction, next) {\n      if (navigationInstruction.getAllInstructions().some(i => i.config.settings.roles.indexOf(\"authenticated\") !== -1)) {\n         var isLoggedIn = !!localStorage.ticket;\n         if (!isLoggedIn) {\n           return next.cancel(new Redirect(\"login\"));\n         }\n      }\n      return next();\n   }\n}\n\nexport class App {\n   configureRouter(config, router) {\n      config.title = \"Aurelia Test\";\n      config.addPipelineStep(\"authorize\", AuthorizeStep);\n      config.map([\n         { route: [\"login\"], moduleId: \"components/login\", title: \"Login\", settings: { roles: [] } },\n         { route: [\"\", \"home\"], moduleId: \"components/home\", title: \"Home\", settings: { roles: [\"authenticated\"] } }\n      ]);\n   }\n}\n\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {bindable, customElement, inject} from \"aurelia-framework\";\nimport BreadcrumbUtil from \"alfresco-js-utils/lib/utils/navigation/Breadcrumbs\";\n\n@customElement(\"breadcrumb\")\n@inject(Element)\nexport class Breadcrumb {\n   \n   constructor(element) {\n      this.element = element;\n      this.breadcrumbs = [{\n         label: \"Home\",\n         relativePath: \"/\"\n      }];\n   }\n\n   navigate(breadcrumb) {\n      let changeEvent = new CustomEvent(\"relativePath\", {\n         detail: breadcrumb.relativePath,\n         bubbles: true\n      });\n      this.element.dispatchEvent(changeEvent);\n   }\n\n   relativePathChanged(newPath, oldPath) {\n      let breadcrumbData = BreadcrumbUtil.createBreadcrumbs({\n         relativePath: newPath\n      });\n      this.breadcrumbs = breadcrumbData.breadcrumbs;\n   }\n\n   @bindable relativePath = \"/\";\n}","export class Home {\n\n}","import {inject} from \"aurelia-framework\";\nimport NodeService from \"alfresco-js-utils/lib/services/NodeService\";\n\n@inject(Element)\nexport class List {\n\n   constructor(element) {\n      this.element = element;\n\n      this.data = {\n         skipCount: 0,\n         maxItems: 3,\n         relativePath: \"/\",\n         list: {\n            entries: [],\n            pagination: {\n               skipCount: 0,\n               maxItems: 3\n            }\n         }\n      };\n      this.getData();\n\n   }\n\n   attached() {\n      this.element.addEventListener(\"navigate\", (event) => {\n         this.navigate(event.detail);\n      });\n      this.element.addEventListener(\"relativePath\", (event) => {\n         this.setRelativePath(event.detail);\n      });\n      this.element.addEventListener(\"pageBack\", () => {\n         this.pageBack();\n      });\n      this.element.addEventListener(\"pageForward\", () => {\n         this.pageForward();\n      });\n   }\n\n   getData() {\n      NodeService.getItems({\n         skipCount: this.data.skipCount,\n         maxItems: this.data.maxItems,\n         relativePath: this.data.relativePath\n      })\n         .then(response => {\n            this.data.list = response.data.list;\n         });\n   }\n\n   pageBack() {\n      if (this.data.list.pagination.skipCount)\n      {\n         this.data.skipCount -= this.data.maxItems;\n         this.getData();\n      }\n   }\n\n   pageForward() {\n      if (this.data.list.pagination.hasMoreItems)\n      {\n         this.data.skipCount += this.data.maxItems;\n         this.getData();\n      }\n   }\n   \n   navigate(item) {\n      this.data.skipCount = 0;\n      this.data.relativePath += `${item.entry.name}/`;\n      this.getData();\n   }\n\n   setRelativePath(relativePath) {\n      this.data.skipCount = 0;\n      this.data.relativePath = relativePath;\n      this.getData();\n   }\n\n}","import {bindable, customElement, inject} from \"aurelia-framework\";\n\n@customElement(\"listview\")\n@inject(Element)\nexport class ListView {\n   \n   constructor(element) {\n      this.element = element;\n   }\n\n   navigate(item) {\n      if (item.entry.isFolder)\n      {\n         let changeEvent = new CustomEvent(\"navigate\", {\n            detail: item,\n            bubbles: true\n         });\n         this.element.dispatchEvent(changeEvent);\n      }\n   }\n\n   @bindable list;\n}","import { inject } from \"aurelia-framework\";\nimport { Router } from \"aurelia-router\";\nimport auth from \"alfresco-js-utils/lib/Authentication\";\n\n@inject(Router)\nexport class Login {\n\n   constructor(router) {\n      this.router = router;\n   }\n\n   handleSubmit() {\n      const username = this.username.value;\n      const pass = this.pass.value;\n\n      auth.login(username, pass).then((loggedIn) => {\n         if (!loggedIn)\n         {\n            \n         }\n         else\n         {\n            this.router.navigate(\"home\");\n         }\n      });\n   }\n}","import {bindable, customElement, inject} from \"aurelia-framework\";\n\n@customElement(\"toolbar\")\n@inject(Element)\nexport class Toolbar {\n   \n   constructor(element) {\n      this.element = element;\n   }\n\n   back() {\n      let changeEvent = new CustomEvent(\"pageBack\", {\n         bubbles: true\n      });\n      this.element.dispatchEvent(changeEvent);\n   }\n   \n   forward() {\n      let changeEvent = new CustomEvent(\"pageForward\", {\n         bubbles: true\n      });\n      this.element.dispatchEvent(changeEvent);\n   }\n\n   @bindable list;\n}"],"sourceRoot":"../src"}